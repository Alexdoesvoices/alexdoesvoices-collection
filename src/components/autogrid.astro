---
// src/components/autogrid.astro
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

interface Props {
  folder: string; 
}

const { folder } = Astro.props;

// 1. The "**" allows Astro to look into any subfolder inside /src/assets/
const allImages = import.meta.glob<{ default: ImageMetadata }>('/src/assets/**/*.{jpeg,jpg,png,gif,webp,svg}');

// 2. We filter by checking if the path contains the folder name
const imagePaths = Object.keys(allImages).filter((path) => {
  return path.includes(`/${folder}/`);
});
---

<div class="not-content grid-container">
  {imagePaths.length > 0 ? (
    imagePaths.map((path) => (
      <div class="grid-item">
        <Image 
          src={allImages[path]()} 
          alt={`Image from ${folder}`} 
          width={400} 
          height={400} 
        />
      </div>
    ))
  ) : (
    <p>No images found in: src/assets/{folder}</p>
  )}
</div>

<style>
  .grid-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 1rem;
  }
  .grid-item img {
    border-radius: 8px;
    object-fit: cover;
    width: 100%;
    height: fit-content;
    display: block;
  }
</style>